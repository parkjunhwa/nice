@use "../core/mixins" as *;

@layer components {
  /* ===== 자주 사용되는 공통 패턴 ===== */
  
  /* 페이지 헤더 */
  :where(.c-page-header) {
    margin-bottom: var(--space-section);
    
    .c-page-header__title {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      color: hsl(var(--color-fg));
      line-height: var(--line-height-tight);
    }
    
    .c-page-header__description {
      font-size: var(--font-size-base);
      color: hsl(var(--color-muted-foreground));
      margin-top: var(--space-1);
      line-height: var(--line-height-normal);
    }
  }

  /* 섹션 컨테이너 */
  :where(.c-section) {
    margin-bottom: var(--space-section);
  }

  /* 기본 패널 */
  :where(.c-panel) {
    background-color: hsl(var(--color-bg-elevated));
    border: 1px solid hsl(var(--color-border));
    border-radius: var(--radius-lg);
    padding: var(--card-padding);
    @include shadow-sm;
  }

  /* 활동 아이템 */
  :where(.c-activity-item) {
    @include flex-center;
    gap: var(--space-3);
    
    .c-activity-item__dot {
      width: var(--space-2);
      height: var(--space-2);
      border-radius: var(--radius-full);
      flex-shrink: 0;
      
      &.c-activity-item__dot--blue {
        background-color: hsl(var(--color-primary));
      }
      
      &.c-activity-item__dot--green {
        background-color: hsl(var(--color-success));
      }
      
      &.c-activity-item__dot--yellow {
        background-color: hsl(var(--color-warning));
      }
      
      &.c-activity-item__dot--red {
        background-color: hsl(var(--color-error));
      }
    }
    
    .c-activity-item__content {
      flex: 1;
      
      .c-activity-item__action {
        font-size: var(--font-size-sm);
        color: hsl(var(--color-fg));
        line-height: var(--line-height-normal);
      }
      
      .c-activity-item__meta {
        font-size: var(--font-size-xs);
        color: hsl(var(--color-muted-foreground));
        line-height: var(--line-height-normal);
      }
    }
  }

  /* 활동 섹션 */
  :where(.c-activity-section) {
    @include flex-col-start;
    gap: var(--space-4);
    
    .c-activity-section__title {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: hsl(var(--color-muted-foreground));
      text-align: center;
      line-height: var(--line-height-normal);
    }
  }

  /* 통계 아이템 */
  :where(.c-stat-item) {
    @include flex-between;
    margin-bottom: 4px; // 더 줄어든 margin-bottom (4px)
    
    .c-stat-item__content {
      .c-stat-item__name {
        font-weight: var(--font-weight-medium);
        color: hsl(var(--color-fg));
        line-height: var(--line-height-normal);
      }
      
      .c-stat-item__subtitle {
        font-size: var(--font-size-sm);
        color: hsl(var(--color-muted-foreground));
        line-height: var(--line-height-normal);
      }
    }
    
    .c-stat-item__value {
      font-weight: var(--font-weight-semibold);
      color: hsl(var(--color-primary));
      line-height: var(--line-height-normal);
    }
  }

  /* 진행률 바 */
  :where(.c-progress-bar) {
    margin-top: var(--space-1);
    height: var(--space-2);
    border-radius: var(--radius-full);
    background-color: hsl(var(--color-muted));
    overflow: hidden;
    
    .c-progress-bar__fill {
      height: 100%;
      border-radius: var(--radius-full);
      background-color: hsl(var(--color-primary));
      transition: width var(--duration-300) var(--ease-out);
    }
  }

  /* 상태 배지 */
  :where(.c-status-badge) {
    @include flex-center;
    padding: var(--space-1) var(--space-2-5);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-normal);
    
    &.c-status-badge--success {
      background-color: hsl(var(--color-success-light));
      color: hsl(var(--color-success));
    }
    
    &.c-status-badge--warning {
      background-color: hsl(var(--color-warning-light));
      color: hsl(var(--color-warning));
    }
    
    &.c-status-badge--error {
      background-color: hsl(var(--color-error-light));
      color: hsl(var(--color-error));
    }
    
    &.c-status-badge--info {
      background-color: hsl(var(--color-info-light));
      color: hsl(var(--color-info));
    }
  }

  /* 섹션 제목 */
  :where(.c-section-title) {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: hsl(var(--color-fg));
    margin-bottom: var(--space-4);
    line-height: var(--line-height-tight);
  }

  /* 섹션 그리드 */
  :where(.c-section-grid) {
    @include grid-fit(300px);
    gap: var(--space-4);
    
    &.c-section-grid--2 {
      @include grid-fit(400px);
    }
    
    &.c-section-grid--3 {
      @include grid-fit(300px);
    }
  }

  /* 아이콘 컨테이너 */
  :where(.c-icon-container) {
    @include flex-center;
    width: 48px;
    height: 48px;
    background-color: hsl(var(--color-primary-light));
    color: hsl(var(--color-primary));
    border-radius: var(--radius-lg);
    @include shadow-sm;
  }

  /* 텍스트 그룹 */
  :where(.c-text-group) {
    @include flex-col-start;
    gap: var(--space-1);
    text-align: center;
    
    .c-text-group__primary {
      font-weight: var(--font-weight-medium);
      color: hsl(var(--color-fg));
      line-height: var(--line-height-normal);
      
      &.c-text-group__primary--large {
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-bold);
        color: hsl(var(--color-primary));
      }
    }
    
    .c-text-group__secondary {
      font-size: var(--font-size-sm);
      color: hsl(var(--color-muted-foreground));
      line-height: var(--line-height-normal);
    }
  }

  /* 구분선 */
  :where(.c-divider) {
    height: 1px;
    background-color: hsl(var(--color-border));
    margin: var(--space-4) 0;
  }

  /* 스페이서 */
  :where(.c-spacer) {
    &.c-spacer--sm {
      height: var(--space-2);
    }
    
    &.c-spacer--md {
      height: var(--space-4);
    }
    
    &.c-spacer--lg {
      height: var(--space-6);
    }
    
    &.c-spacer--xl {
      height: var(--space-8);
    }
  }

  /* 반응형 숨김 */
  :where(.c-hidden) {
    &.c-hidden--mobile {
      @include mobile {
        display: none;
      }
    }
    
    &.c-hidden--tablet {
      @include tablet {
        display: none;
      }
    }
    
    &.c-hidden--desktop {
      @include desktop {
        display: none;
      }
    }
  }

  /* 반응형 표시 */
  :where(.c-visible) {
    display: none;
    
    &.c-visible--mobile {
      @include mobile {
        display: block;
      }
    }
    
    &.c-visible--tablet {
      @include tablet {
        display: block;
      }
    }
    
    &.c-visible--desktop {
      @include desktop {
        display: block;
      }
    }
  }

  /* 애니메이션 유틸리티 */
  :where(.c-animate) {
    &.c-animate--fade-in {
      animation: fadeIn var(--duration-300) var(--ease-out);
    }
    
    &.c-animate--slide-up {
      animation: slideUp var(--duration-300) var(--ease-out);
    }
    
    &.c-animate--scale-in {
      animation: scaleIn var(--duration-200) var(--ease-out);
    }
  }

  /* 애니메이션 키프레임 */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
} 